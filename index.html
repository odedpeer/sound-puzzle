<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link href="./media.css" rel="stylesheet" />
  </head>
  <body class="pa2">
    <script src="DragDropTouch.js"></script>
    <script src="./media.js"></script>
    <div class="reference pb2 bb">
      <h1>
        Sound Puzzle
      </h1>
      <h3>
        Listen to the sound bites and arrange in order by dragging them into
        place
      </h3>
      <div>
        <audio class="pr2" controls id="player">
          <source
            src="https://cdn.glitch.com/3f6d5ca6-f448-40f4-882f-44a736d1d4ce%2Fsunscreen.mp3?v=1592826506395"
            type="audio/mp3"
          />
        </audio>
      </div>
      <div class="grid-container">
        <script>
          for (let i = 0; i < numberOfSplits; i++) {
            document.write(
              `<div><img src="https://cdn.glitch.com/3f6d5ca6-f448-40f4-882f-44a736d1d4ce%2Fsunscreen-${i}.png"
                class="wav-tile"
               ></div>`
            );
          }
        </script>
      </div>
    </div>

    <div class="solution">
      <h1>
        Solution
      </h1>
      <div>
        <button class="bg-blue" onclick="stop()">Stop</button>
      </div>
      <div class="grid-container pb2 bb" id="playlist">
        <script>
          for (let i = 0; i < numberOfSplits; i++) {
            document.write(`
        <div
          id="selection${i}"
          class="droppoint"
          ondrop="drop(event)"
          ondragover="allowDrop(event)"
        ></div>
        `);
          }
        </script>
      </div>
    </div>

    <div class="parts">
      <h1>
        Parts
      </h1>
      <div>
        <button class="bg-blue" onclick="stop()">Stop</button>
      </div>
      <div
        class="grid-container mt2 bg-light-green"
        id="splits"
        ondragover="allowDrop(event)"
        ondrop="drop(event)"
      >
        <script>
          // shuffle splits
          let indexes = [];
          for (let i = 0; i < numberOfSplits; i++) {
            indexes.push(i);
          }
          let shuffle = [];
          for (let i = 0; i < numberOfSplits; i++) {
            shuffle.push(indexes.splice(Math.random() * indexes.length, 1)[0]);
          }
          for (let i = 0; i < numberOfSplits; i++) {
            const index = shuffle[i];
            document.write(`
        <div id="${index}" class="split" draggable="true" ondragstart="drag(event)">
          <div>
            <img
            draggable="false"
            src="https://cdn.glitch.com/3f6d5ca6-f448-40f4-882f-44a736d1d4ce%2Fsunscreen-${index}.png"
            >
          </div>
          <div>
            <button onclick="playSplit(${index})"><span class="hint">${index}</span> &rtri;</button>
          </div>
        </div>
        `);
          }
        </script>
      </div>
    </div>

    <div class="hints">
      <button class="bg-green" onclick="toggleBorder()">Toggle Border</button>
      <button class="bg-green" onclick="toggleHint()">Toggle Hints</button>
    </div>
    <div id="announcement"></div>
  </body>
</html>
